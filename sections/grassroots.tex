%==============================================================================
\section{Multiagent GLP is Grassroots}\label{sec:grassroots}
%==============================================================================

This section establishes that maGLP is grassroots. We first define protocols and the grassroots property, then prove that maGLP satisfies it, and finally show that any GLP application using cold calls inherits the grassroots property.

%------------------------------------------------------------------------------
\subsection{Protocols and the Grassroots Property}
\label{sec:protocols}
%------------------------------------------------------------------------------

A protocol is a family of multiagent transition systems, one for each set of agents $P\subset \Pi$, which share an underlying set of local states $\calS$ with a designated initial state $s0$.

\begin{definition}[Local-States Function]\label{definition:local-states-function}
A \temph{local-states function} $S: 2^\Pi \to 2^\calS$ maps every set of agents $P \subset \Pi$ to a set of local states $S(P) \subset \calS$ that includes $s0$ and satisfies $P \subset P' \subset \Pi \implies S(P) \subset S(P')$.
\end{definition}

Given a local-states function $S$, we use $C$ to denote configurations over $S$, with $C(P) := S(P)^P$ and $c0(P):= \{s0\}^P$.

\begin{definition}[Protocol]\label{definition:protocol}
A \temph{protocol} $\calF$ over a local-states function $S$ is a family of multiagent transition systems that has exactly one transition system $\calF(P) = (C(P),c0(P),T(P))$ for every $P \subset \Pi$.
\end{definition}

\begin{definition}[Projection]\label{definition:projection}
Let $\emptyset \subset P \subset P' \subset \Pi$.
If $c'$ is a configuration over $P'$ then $c'/P$, the \temph{projection of $c'$ over $P$}, is the configuration $c$ over $P$ defined by $c_p := c'_p$ for every $p\in P$.
\end{definition}

Note that in the definition above, $c_p$, the state of $p$ in $c$, is in $S(P')$, not in $S(P)$, and hence may include elements ``alien'' to $P$, e.g., logic variables shared with $q\in P'\setminus P$.

\begin{definition}[Oblivious, Interactive, Grassroots]\label{definition:grassroots}
A protocol $\calF$ is:
\begin{enumerate}
    \item \temph{oblivious} if for every $\emptyset \subset P \subset P' \subseteq \Pi$, 
    $T(P){\uparrow}P'\subseteq T(P')$
    \item \temph{interactive} if for every $\emptyset \subset P \subset P' \subseteq \Pi$ and every configuration $c\in C(P')$ such that $c{/}P\in C(P)$, there is a computation $c\xrightarrow{*} c'$ of $\calF(P')$ for which $c'{/}P\notin C(P)$.
    \item \temph{grassroots} if it is oblivious and interactive.
\end{enumerate}
\end{definition}

Being oblivious implies that if a run of $\calF(P')$ reaches some configuration $c'$, then anything $P$ could do on their own in the configuration $c'/P$ (with a transition from $T(P)$), they can still do in the larger configuration $c'$ (with a transition from $T(P')$), effectively being oblivious to members of $P'\setminus P$.

Being interactive is a weak liveness requirement: no matter what members of $P$ do, if they run within a larger set of agents it is always the case that they can eventually interact with non-$P$'s in a way that leaves ``alien traces'' in the local states of $P$, so that the resulting configuration $c'/P$ could not have been produced by $P$ running on their own.

%------------------------------------------------------------------------------
\subsection{Transactions-Based Protocols are Oblivious}
\label{sec:tb-oblivious}
%------------------------------------------------------------------------------

\begin{definition}[Transactions Over a Local-States Function]\label{definition:transactions-lsf}
Let $S$ be a local-states function. A set of transactions $R$ is \temph{over $S$} if every transaction $t\in R$ is a multiagent transition over $Q$ and $S(Q')$ for some $Q \subseteq Q'\subset \Pi$. Given such a set $R$ and $P\subset \Pi$,
$R(P) := \{ t\in R : t \text{ is over } Q \text{ and } S(Q'), Q \subseteq Q'\subseteq P\}$.
\end{definition}

\begin{definition}[Transactions-Based Protocol]\label{definition:tb-protocol}
Let $S$ be a local-states function and $R$ a set of transactions over $S$.
Then a \temph{protocol $\calF$ over $R$ and $S$} includes for each set of agents $P\subset \Pi$ the transactions-based multiagent transition system $\calF(P)$ over $P$, $S(P)$, and $R(P)$: $\calF(P) := (S(P)^P,\{s0\}^P,R(P){\uparrow}P)$.
\end{definition}

\begin{restatable}[Transactions-Based Protocols are Oblivious]{proposition}{propOblivious}
\label{proposition:oblivious}
A transactions-based protocol is oblivious.
\end{restatable}

\begin{definition}[Interactive Transactions]\label{definition:interactive-transactions}
A set of transactions $R$ over a local-states function $S$ is \temph{interactive} if for every $\emptyset \subset P \subset P' \subset \Pi$ and every configuration $c\in C(P')$ such that $c/P\in C(P)$, there is a computation $(c\xrightarrow{*} c')\subseteq R(P'){\uparrow}P'$ for which $c'/P\notin C(P)$.
\end{definition}

\begin{restatable}[Interactive Transactions Induce Grassroots Protocols]{theorem}{thmInteractiveGrassroots}
\label{theorem:interactive-grassroots}
A protocol over an interactive set of transactions is grassroots.
\end{restatable}

%------------------------------------------------------------------------------
\subsection{maGLP is Grassroots}
\label{sec:maglp-grassroots}
%------------------------------------------------------------------------------

We now prove that maGLP is grassroots.

\begin{restatable}[maGLP is Grassroots]{theorem}{thmMaGLPGrassroots}
\label{theorem:maGLP-grassroots}
The maGLP protocol is grassroots.
\end{restatable}

%------------------------------------------------------------------------------
\subsection{GLP Applications Using Cold Calls are Grassroots}
\label{sec:apps-grassroots}
%------------------------------------------------------------------------------

The grassroots property of maGLP extends to applications built on top of it, provided they use the cold-call mechanism.

\begin{definition}[GLP Application, Cold Call]
A \temph{GLP application} is a GLP program $M$ together with the maGLP infrastructure. An application \temph{uses cold calls} if agents can execute the Cold-call transaction to establish communication with previously-disconnected agents.
\end{definition}

\begin{restatable}[GLP Applications Using Cold Calls are Grassroots]{proposition}{propAppGrassroots}
\label{prop:app-grassroots}
Any GLP application that uses cold calls is grassroots.
\end{restatable}

This proposition provides a simple criterion for verifying that a GLP application is grassroots: if it uses cold calls for initial contact between disconnected agents, it inherits the grassroots property from maGLP.

\begin{restatable}[The Grassroots Social Graph is Grassroots]{corollary}{corSocialGraphGrassroots}
\label{corollary:social-graph-grassroots}
The GLP implementation of the grassroots social graph (Section~\ref{sec:social-graph}) is grassroots.
\end{restatable}

Proofs appear in Appendix~\ref{appendix:proofs}.
